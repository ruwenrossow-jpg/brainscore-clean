import{f as h,t as _e,a as v,c as J}from"../chunks/O6Scfog5.js";import{o as ye}from"../chunks/ClDAKjVE.js";import{aj as we,y as Q,ar as ie,am as ke,D as Se,aw as ze,ax as Be,ac as $e,n as C,s as d,f as k,c as i,r as n,p as ne,g as r,d as P,t as H,b as p,a as le,as as Pe}from"../chunks/_KxZsWR2.js";import{d as oe,s as K,e as De}from"../chunks/DYLJxuZE.js";import{i as w}from"../chunks/C5zH9Bdp.js";import{h as Me}from"../chunks/DAPy_qUL.js";import{s as ae}from"../chunks/i09DBs4C.js";import{s as We,a as te}from"../chunks/D6LAuGEZ.js";import{g as X}from"../chunks/Cx1u6K8_.js";import{c as Oe,a as se,P as qe}from"../chunks/C5Chkb5p.js";import{B as de}from"../chunks/Da8G-eBB.js";import{e as Fe,i as Te}from"../chunks/BHVu21DL.js";import{r as Ce,b as Ee}from"../chunks/BOC29LpK.js";function ve(e,t,o=!1){if(e.multiple){if(t==null)return;if(!Se(t))return ze();for(var l of e.options)l.selected=t.includes(E(l));return}for(l of e.options){var c=E(l);if(Be(c,t)){l.selected=!0;return}}(!o||t!==void 0)&&(e.selectedIndex=-1)}function Ae(e){var t=new MutationObserver(()=>{ve(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),$e(()=>{t.disconnect()})}function Ie(e,t,o=t){var l=new WeakSet,c=!0;we(e,"change",b=>{var a=b?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(a),E);else{var x=e.querySelector(a)??e.querySelector("option:not([disabled])");f=x&&E(x)}o(f),Q!==null&&l.add(Q)}),ie(()=>{var b=t();if(e===document.activeElement){var a=ke??Q;if(l.has(a))return}if(ve(e,b,c),c&&b===void 0){var f=e.querySelector(":checked");f!==null&&(b=E(f),o(b))}e.__value=b,c=!1}),Ae(e)}function E(e){return"__value"in e?e.__value:e.value}var Ne=h(`/**
 * Onboarding Welcome Screen
 * Schritt 1: BegrÃ¼ÃŸung & ErklÃ¤rung
 */ <div class="space-y-6"><div class="text-center"><div class="text-6xl mb-4">ğŸ§ </div> <h2 class="text-3xl font-bold text-black mb-2">Willkommen bei BrainScore!</h2> <p class="text-gray-600">Lass uns dein Profil einrichten</p></div> <div class="space-y-4"><div class="bg-white p-4 rounded-lg border border-gray-300"><div class="flex items-start"><span class="text-2xl mr-3">ğŸ“Š</span> <div><h3 class="font-semibold text-black mb-1">Was ist BrainScore?</h3> <p class="text-sm text-gray-700">Ein wissenschaftlich validierter Test zur Messung deiner <strong>Konzentration</strong> und <strong>Reaktionsgeschwindigkeit</strong>.</p></div></div></div> <div class="bg-white p-4 rounded-lg border border-gray-300"><div class="flex items-start"><span class="text-2xl mr-3">ğŸ“ˆ</span> <div><h3 class="font-semibold text-black mb-1">Verlauf & Insights</h3> <p class="text-sm text-gray-700">Tracke deine Entwicklung Ã¼ber Zeit und erkenne Muster 
            zwischen Bildschirmzeit und kognitiver Performance.</p></div></div></div> <div class="bg-white p-4 rounded-lg border border-gray-300"><div class="flex items-start"><span class="text-2xl mr-3">ğŸ”’</span> <div><h3 class="font-semibold text-black mb-1">Deine Daten</h3> <p class="text-sm text-gray-700">Alle Daten werden <strong>anonym</strong> und sicher gespeichert. 
            Du behÃ¤ltst die volle Kontrolle.</p></div></div></div></div> <!> <p class="text-xs text-center text-gray-500">Dauert nur 2 Minuten</p></div>`,1);function Re(e,t){C();var o=Ne(),l=d(k(o)),c=d(i(l),4);de(c,{variant:"primary",size:"lg",fullWidth:!0,get onclick(){return t.onNext},children:(b,a)=>{C();var f=_e("Los geht's â†’");v(b,f)},$$slots:{default:!0}}),C(2),n(l),v(e,o)}var Ue=h('<div class="alert alert-error bg-red-50 border border-red-200 rounded-lg p-3"><span class="text-sm text-red-700"> </span></div>'),je=h("<option> </option>"),He=h('<span class="flex-1">Profil erstellen</span>'),Ke=h(`/**
 * Onboarding Form
 * Schritt 2: Name & Ziel erfassen
 */ <form class="space-y-6"><div class="text-center"><h2 class="text-3xl font-bold text-black mb-2">Ãœber dich</h2> <p class="text-gray-600">Hilf uns, dein Erlebnis zu personalisieren</p></div> <!> <div class="form-control w-full"><label class="label" for="name"><span class="label-text text-black font-medium">Wie sollen wir dich nennen?</span> <span class="label-text-alt text-gray-500">Spitzname oder echter Name</span></label> <input id="name" type="text" placeholder="z.B. Max oder MaxM" class="input input-bordered w-full text-lg bg-white border-gray-300 focus:border-black" required maxlength="50"/></div> <div class="form-control w-full"><label class="label" for="goal"><span class="label-text text-black font-medium">Warum nutzt du BrainScore?</span></label> <select id="goal" class="select select-bordered w-full bg-white border-gray-300 focus:border-black text-base" required><option disabled selected>WÃ¤hle dein Hauptziel...</option><!></select></div> <div class="bg-gray-50 p-4 rounded-lg border border-gray-200"><p class="text-xs text-gray-600 text-center">ğŸ“Š Diese Infos helfen uns, relevante Insights fÃ¼r dich zu generieren. 
      Du kannst sie jederzeit in deinem Profil Ã¤ndern.</p></div> <div class="flex gap-3"><button type="button" class="btn btn-ghost flex-1">â† ZurÃ¼ck</button> <!></div></form>`,1);function Le(e,t){ne(t,!0);let o=P(""),l=P(""),c=P("");const b=[{value:"focus",label:"ğŸ¯ Fokus & Konzentration verbessern"},{value:"digital_hygiene",label:"ğŸ“± Digitale Hygiene optimieren"},{value:"experiments",label:"ğŸ”¬ Selbstexperimente durchfÃ¼hren"},{value:"performance",label:"âš¡ Performance tracken"},{value:"other",label:"ğŸ’­ Andere GrÃ¼nde"}];function a(s){if(s.preventDefault(),!r(o).trim()){p(c,"Bitte gib einen Namen ein");return}if(!r(l)){p(c,"Bitte wÃ¤hle ein Ziel aus");return}t.onComplete({name:r(o).trim(),goal:r(l)})}C();var f=Ke(),x=d(k(f)),A=d(i(x),2);{var I=s=>{var u=Ue(),g=i(u),z=i(g,!0);n(g),n(u),H(()=>K(z,r(c))),v(s,u)};w(A,s=>{r(c)&&s(I)})}var S=d(A,2),N=d(i(S),2);Ce(N),n(S);var D=d(S,2),M=d(i(D),2),m=i(M);m.value=m.__value="";var y=d(m);Fe(y,17,()=>b,Te,(s,u)=>{var g=je(),z=i(g,!0);n(g);var U={};H(()=>{K(z,r(u).label),U!==(U=r(u).value)&&(g.value=(g.__value=r(u).value)??"")}),v(s,g)}),n(M),n(D);var W=d(D,4),R=i(W);R.__click=function(...s){var u;(u=t.onBack)==null||u.apply(this,s)};var O=d(R,2);de(O,{variant:"primary",size:"lg",fullWidth:!1,children:(s,u)=>{var g=He();v(s,g)},$$slots:{default:!0}}),n(W),n(x),De("submit",x,a),Ee(N,()=>r(o),s=>p(o,s)),Ie(M,()=>r(l),s=>p(l,s)),v(e,f),le()}oe(["click"]);var Ze=h('<div class="loading loading-spinner loading-lg"></div>'),Ge=h('<div class="alert alert-error bg-red-50 border border-red-200 rounded-lg p-3 mb-4"><span class="text-sm text-red-700"> </span></div>'),Ve=h("<!> <!>",1),Je=h('<div class="text-center py-12"><div class="loading loading-spinner loading-lg mb-4"></div> <p class="text-gray-600">Profil wird erstellt...</p></div>'),Qe=h('<div class="text-center mt-6"><button class="text-sm text-gray-500 hover:text-gray-700">SpÃ¤ter vervollstÃ¤ndigen â†’</button></div>'),Xe=h('<div class="w-full max-w-2xl"><div class="mb-8"><div class="flex items-center justify-center gap-2 mb-4"><div></div> <div class="w-8 h-0.5 bg-gray-300"></div> <div></div></div> <p class="text-center text-sm text-gray-500"> </p></div> <div class="card bg-base-200 shadow-lg border border-gray-200"><div class="card-body"><!></div></div> <!></div>'),Ye=h(`/**
 * Onboarding Page
 * Multi-Step Flow: Welcome â†’ Form â†’ Complete
 * 
 * ARCHITEKTUR:
 * - State Machine Pattern (wie SART-Test)
 * - PrÃ¼ft ob User eingeloggt ist
 * - Speichert Profil in DB
 * - Redirect zu Dashboard nach Completion
 */  <div class="min-h-screen bg-white flex items-center justify-center px-4 py-12"><!></div>`,1);function fr(e,t){ne(t,!0);const o=()=>te(Oe,"$currentUser",c),l=()=>te(se,"$auth",c),[c,b]=We();let a=P("welcome"),f=P(!1),x=P("");ye(()=>{o()||X("/auth")});async function A(m){if(!o())return;p(a,"saving"),p(f,!0),p(x,"");const{success:y,error:W}=await qe.upsertProfile(o().id,m.name,m.goal);y?(await se.initialize(),setTimeout(()=>{X("/dashboard")},500)):(p(x,"Fehler beim Speichern. Bitte versuche es erneut."),p(a,"form"),p(f,!1))}C();var I=Ye();Me("fpvdp2",m=>{ie(()=>{Pe.title="Onboarding - BrainScore"})});var S=d(k(I)),N=i(S);{var D=m=>{var y=Ze();v(m,y)},M=m=>{var y=J(),W=k(y);{var R=O=>{var s=Xe(),u=i(s),g=i(u),z=i(g),U=d(z,4);n(g);var Y=d(g,2),ce=i(Y);n(Y),n(u);var L=d(u,2),ee=i(L),ue=i(ee);{var fe=_=>{Re(_,{onNext:()=>p(a,"form")})},me=_=>{var B=J(),Z=k(B);{var pe=$=>{var q=Ve(),j=k(q);{var G=T=>{var V=Ge(),re=i(V),xe=i(re,!0);n(re),n(V),H(()=>K(xe,r(x))),v(T,V)};w(j,T=>{r(x)&&T(G)})}var F=d(j,2);Le(F,{onComplete:A,onBack:()=>p(a,"welcome")}),v($,q)},he=$=>{var q=J(),j=k(q);{var G=F=>{var T=Je();v(F,T)};w(j,F=>{r(a)==="saving"&&F(G)},!0)}v($,q)};w(Z,$=>{r(a)==="form"?$(pe):$(he,!1)},!0)}v(_,B)};w(ue,_=>{r(a)==="welcome"?_(fe):_(me,!1)})}n(ee),n(L);var ge=d(L,2);{var be=_=>{var B=Qe(),Z=i(B);Z.__click=()=>X("/dashboard"),n(B),v(_,B)};w(ge,_=>{r(a)!=="saving"&&_(be)})}n(s),H(()=>{ae(z,1,`w-2 h-2 rounded-full ${r(a)==="welcome"?"bg-black":"bg-gray-300"}`),ae(U,1,`w-2 h-2 rounded-full ${r(a)==="form"||r(a)==="saving"?"bg-black":"bg-gray-300"}`),K(ce,`Schritt ${r(a)==="welcome"?"1":"2"} von 2`)}),v(O,s)};w(W,O=>{o()&&O(R)},!0)}v(m,y)};w(N,m=>{l().loading?m(D):m(M,!1)})}n(S),v(e,I),le(),b()}oe(["click"]);export{fr as component};

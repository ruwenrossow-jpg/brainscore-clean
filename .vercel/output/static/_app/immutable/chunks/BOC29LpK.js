import{h as d,T as h,ag as m,ah as k,ai as S,aj as b,y as c,ak as y,a4 as E,al as A,am as M}from"./_KxZsWR2.js";const T=Symbol("is custom element"),L=Symbol("is html");function O(a){if(d){var e=!1,l=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var v=a.value;n(a,"value",null),a.value=v}if(a.hasAttribute("checked")){var r=a.checked;n(a,"checked",null),a.checked=r}}};a.__on_r=l,h(l),m()}}function n(a,e,l,v){var r=N(a);d&&(r[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||r[e]!==(r[e]=l)&&(e==="loading"&&(a[k]=l),a.removeAttribute(e))}function N(a){return a.__attributes??(a.__attributes={[T]:a.nodeName.includes("-"),[L]:a.namespaceURI===S})}function g(a,e,l=e){var v=new WeakSet;b(a,"input",async r=>{var s=r?a.defaultValue:a.value;if(s=_(a)?u(s):s,l(s),c!==null&&v.add(c),await y(),s!==(s=e())){var t=a.selectionStart,f=a.selectionEnd,i=a.value.length;if(a.value=s??"",f!==null){var o=a.value.length;t===f&&f===i&&o>i?(a.selectionStart=o,a.selectionEnd=o):(a.selectionStart=t,a.selectionEnd=Math.min(f,o))}}}),(d&&a.defaultValue!==a.value||E(e)==null&&a.value)&&(l(_(a)?u(a.value):a.value),c!==null&&v.add(c)),A(()=>{var r=e();if(a===document.activeElement){var s=M??c;if(v.has(s))return}_(a)&&r===u(a.value)||a.type==="date"&&!r&&!a.value||r!==a.value&&(a.value=r??"")})}function _(a){var e=a.type;return e==="number"||e==="range"}function u(a){return a===""?null:+a}export{g as b,O as r};
